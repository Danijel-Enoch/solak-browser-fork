<!DOCTYPE html>
<html>
<head>
</head>

<body>
	<h1>Felida Browser</h1>
	<img src="../assets/icon.png" width="100" height="100" align=left>
	<p id="a">
	Congratulations! Your history is clean :D
	</p>
	<script>
		const { ipcRenderer } = require('electron');
		
		// src: https://stackoverflow.com/questions/847185/convert-a-unix-timestamp-to-time-in-javascript
		function convertUnixToFormat(unix)
		{
			let date = new Date(unix * 1000);
			let hours = date.getHours();
			let minutes = "0" + date.getMinutes();
			let seconds = "0" + date.getSeconds();
			let formattedTime = hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);
			return formattedTime;
		}
		
		ipcRenderer.once('historydata', (event, data) =>
		{
			let ele = document.getElementById("a")
			let splitted = data.split('\r\n')
			splitted = splitted.slice(0, splitted.length-1)
			if(splitted.length > 1) { ele.innerHTML = '' }
			for(let i=0; i<splitted.length; i++)
			{
				switch(i%3)
				{
					case 0:
						ele.innerHTML += `Time: ${convertUnixToFormat(splitted[i])} | `
						break;
					
					case 1:
						ele.innerHTML += `Title: ${splitted[i]} | `
						break;
					
					case 2:
						ele.innerHTML += `URL: ${splitted[i]}<br />`
						break;
				}
			}
		})
		ipcRenderer.send('historydata');
	</script>
</body>

</html>
